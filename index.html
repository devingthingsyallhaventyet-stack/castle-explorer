<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Castle Explorer â€” UK &amp; Ireland</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"/>
<link rel="stylesheet" href="styles.css"/>
</head>
<body>

<!-- Top Bar -->
<div class="top-bar">
  <div class="logo">ğŸ° <span class="logo-text">Castle Explorer</span></div>
  <div class="search-wrap">
    <input type="text" id="search" placeholder="Search castles, abbeys, ruins..." autocomplete="off"/>
    <div id="search-results" class="search-results"></div>
  </div>
  <div class="top-actions">
    <button class="btn-route" id="btn-route-toggle">ğŸ“ Plan Route</button>
    <button class="btn-filter" id="btn-filter-toggle">âš™ Filters</button>
  </div>
</div>

<!-- Filter Panel -->
<div class="filter-panel" id="filter-panel">
  <div class="filter-group">
    <label>Country</label>
    <div class="filter-chips" id="filter-country">
      <button class="chip active" data-value="all">All</button>
      <button class="chip" data-value="England">England</button>
      <button class="chip" data-value="Wales">Wales</button>
      <button class="chip" data-value="Scotland">Scotland</button>
      <button class="chip" data-value="Northern Ireland">N. Ireland</button>
      <button class="chip" data-value="Ireland">Ireland</button>
    </div>
  </div>
  <div class="filter-group">
    <label>Type</label>
    <div class="filter-chips" id="filter-type">
      <button class="chip active" data-value="all">All</button>
      <button class="chip" data-value="castle">ğŸ° Castle</button>
      <button class="chip" data-value="abbey">â›ª Abbey</button>
      <button class="chip" data-value="ruin">ğŸª¨ Ruin</button>
      <button class="chip" data-value="tower house">ğŸ—¼ Tower</button>
      <button class="chip" data-value="palace">ğŸ‘‘ Palace</button>
      <button class="chip" data-value="fortified house">ğŸ  Fortified</button>
    </div>
  </div>
  <div class="filter-group">
    <label>Condition</label>
    <div class="filter-chips" id="filter-condition">
      <button class="chip active" data-value="all">All</button>
      <button class="chip" data-value="intact">Intact</button>
      <button class="chip" data-value="partial ruin">Partial</button>
      <button class="chip" data-value="ruin">Ruin</button>
      <button class="chip" data-value="foundations only">Foundations</button>
    </div>
  </div>
  <div class="filter-stats">Showing <span id="visible-count">0</span> of <span id="total-count">0</span> sites</div>
</div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <button class="sidebar-close" id="sidebar-close">âœ•</button>
  <!-- Photo Gallery -->
  <div class="sidebar-gallery" id="sidebar-gallery">
    <div class="gallery-track" id="gallery-track"></div>
    <button class="gallery-prev" id="gallery-prev">â€¹</button>
    <button class="gallery-next" id="gallery-next">â€º</button>
    <div class="gallery-dots" id="gallery-dots"></div>
  </div>
  <div class="sidebar-img-wrap" id="sidebar-img-wrap">
    <img id="sidebar-img" src="" alt=""/>
    <div class="sidebar-img-placeholder" id="sidebar-img-placeholder">ğŸ°</div>
  </div>
  <div class="sidebar-body">
    <div class="sidebar-badges">
      <span class="badge badge-type" id="sidebar-type"></span>
      <span class="badge badge-era" id="sidebar-era"></span>
      <span class="badge badge-condition" id="sidebar-condition"></span>
    </div>
    <h2 id="sidebar-name"></h2>
    <p class="sidebar-location" id="sidebar-location"></p>
    <div class="sidebar-rating" id="sidebar-rating-wrap">
      <span class="stars" id="sidebar-stars"></span>
      <span class="rating-num" id="sidebar-rating"></span>
      <span class="review-count" id="sidebar-reviews"></span>
    </div>
    <div class="sidebar-google-attr" id="sidebar-google-attr" style="display:none;">
      <img src="https://www.gstatic.com/images/branding/googlelogo/2x/googlelogo_color_42x14dp.png" alt="Google" class="google-logo-small"/>
      <span>rating</span>
    </div>
    <div class="sidebar-hours" id="sidebar-hours" style="display:none;">
      <h4>ğŸ• Opening Hours</h4>
      <ul id="sidebar-hours-list"></ul>
    </div>
    <p class="sidebar-desc" id="sidebar-desc"></p>
    <a class="btn-directions" id="sidebar-directions" href="#" target="_blank">ğŸ§­ Get Directions</a>
  </div>
</div>

<!-- Route Planner -->
<div class="route-panel" id="route-panel">
  <h3>ğŸ“ Plan Your Route</h3>
  <div class="route-inputs">
    <input type="text" id="route-from" placeholder="Starting point (e.g. London)"/>
    <input type="text" id="route-to" placeholder="Destination (e.g. Edinburgh)"/>
    <input type="text" id="route-via" placeholder="Must visit castle (optional)"/>
    <button class="btn-find-route" id="btn-find-route">Find Routes</button>
  </div>
  <div id="route-loading" class="route-loading" style="display:none;">
    <div class="spinner"></div>
    <span>Calculating routes...</span>
  </div>
  <div id="route-results"></div>
</div>

<!-- Map -->
<div id="map"></div>

<!-- Google Attribution Footer -->
<div class="google-attribution">
  Powered by <img src="https://www.gstatic.com/images/branding/googlelogo/2x/googlelogo_color_42x14dp.png" alt="Google" style="height:12px;vertical-align:middle;margin:0 3px;"/> Maps Platform
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
<script src="data.js"></script>
<script>
  // Initialize Google Maps callback
  function onGoogleMapsLoaded() {
    window._googleReady = true;
    if (window._onGoogleReady) window._onGoogleReady();
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA1OrSJLhSG2YOLKPAo9-Jk0Lwoe4X0SX8&libraries=places,routes&callback=onGoogleMapsLoaded" async defer></script>
<script src="app.js"></script>
</body>
</html>
